<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Prediction</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ğŸŒŒ Ø®Ù„ÙÙŠØ© Ø¹Ø§Ù…Ø© Ø¨Ù†Ù…Ø· Ù‡Ø§Ø¯Ø¦ */
    body {
      margin: 0;
      font-family: "Cairo", sans-serif;
      background: linear-gradient(135deg, #e0f7ff, #a0d4f7);
      color: #004466;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-y: auto;
    }

    /* âœ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
    h1 {
      margin: 25px 0;
      font-size: 2.8rem;
      color: #0077aa;
      text-shadow: 0 0 10px #00aaff, 0 0 20px #0099cc;
      font-weight: bold;
      letter-spacing: 2px;
    }

    /* ğŸ“¦ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
    .container {
      width: 95%;
      max-width: 1200px;
      background: rgba(255, 255, 255, 0.8);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0, 119, 170, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 119, 170, 0.3);
      margin-bottom: 30px;
    }

    /* ğŸ§­ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… */
    .controls {
      text-align: center;
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(0, 119, 170, 0.3);
      border-radius: 16px;
      padding: 15px;
      box-shadow: 0 0 15px rgba(0, 119, 170, 0.1);
    }

    /* ğŸ§© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
    select, input[type="number"], button {
      background: rgba(240, 248, 255, 0.9);
      border: 2px solid #0077aa;
      color: #004466;
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 1rem;
      margin: 10px;
      outline: none;
      cursor: pointer;
      transition: 0.3s ease;
    }

    select:hover, input[type="number"]:hover, button:hover {
      background: #0077aa;
      color: #ffffff;
      box-shadow: 0 0 10px #0077aa, 0 0 20px #00aaff;
    }

    /* ğŸŒ Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
    #map {
      height: 450px;
      width: 100%;
      border-radius: 16px;
      margin: 25px 0;
      box-shadow: 0 0 25px rgba(0, 119, 170, 0.4);
      border: 1px solid rgba(0, 119, 170, 0.3);
    }

    /* ğŸ“Š Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ */
    canvas {
      background: #f0f8ff;
      border-radius: 14px;
      padding: 15px;
      box-shadow: 0 0 20px rgba(0, 119, 170, 0.25);
      border: 1px solid rgba(0, 119, 170, 0.25);
    }

    /* âš™ï¸ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ */
    label {
      margin: 5px;
      font-size: 1.1rem;
      color: #004466;
    }

    /* ØªÙ‚ÙŠÙŠÙ… Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ */
    .weather-assessment {
      width: 95%;
      max-width: 1200px;
      background: rgba(255, 255, 255, 0.8);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0, 119, 170, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 119, 170, 0.3);
      margin-bottom: 30px;
    }

    .overall-rating {
      text-align: center;
      margin-bottom: 25px;
      padding: 15px;
      background: rgba(240, 248, 255, 0.9);
      border-radius: 16px;
      border: 1px solid rgba(0, 119, 170, 0.3);
    }

    .rating-bar {
      width: 100%;
      height: 25px;
      background: #e0e0e0;
      border-radius: 12px;
      margin: 15px 0;
      overflow: hidden;
    }

    .rating-fill {
      height: 100%;
      border-radius: 12px;
      transition: width 0.5s ease;
    }

    .detailed-assessment h3 {
      color: #0077aa;
      border-bottom: 2px solid #0077aa;
      padding-bottom: 10px;
    }

    .assessment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .assessment-item {
      background: rgba(240, 248, 255, 0.9);
      padding: 15px;
      border-radius: 12px;
      border: 1px solid rgba(0, 119, 170, 0.3);
    }

    .assessment-item h4 {
      margin-top: 0;
      color: #004466;
      border-bottom: 1px solid rgba(0, 119, 170, 0.3);
      padding-bottom: 8px;
    }

    /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ… */
    .rating-very-bad { background: linear-gradient(to right, #ff4d4d, #cc0000); }
    .rating-bad { background: linear-gradient(to right, #ff9966, #ff6600); }
    .rating-normal { background: linear-gradient(to right, #ffcc00, #ff9900); }
    .rating-good { background: linear-gradient(to right, #99cc33, #669900); }
    .rating-very-good { background: linear-gradient(to right, #66cc66, #339933); }
  </style>
</head>
<body>
  <h1>ğŸŒ Weather Prediction</h1>

  <div id="map"></div>

  <div class="controls">
    <label>Day: <input type="number" id="day" min="1" max="31"></label>
    <label>Month: <input type="number" id="month" min="1" max="12"></label>
    <label>Year: <input type="number" id="year" min="2000" max="2100"></label>
    <br>

    <!-- âœ… Dropdown Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© -->
    <label>Select City: 
      <select id="citySelect">
        <option value="">-- Choose a city --</option>
      </select>
    </label>
    <br>

    <!-- âœ… Dropdown Ù„Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„ØªÙ†Ø¨Ø¤ -->
    <label>Show Prediction: 
      <select id="predictionType">
        <option value="temperature">ğŸŒ¡ï¸ Temperature</option>
        <option value="humidity">ğŸ’§ Humidity</option>
        <option value="windSpeed">ğŸŒ¬ï¸ Wind Speed</option>
        <option value="windDirection">ğŸ§­ Wind Direction</option>
        <option value="precipitation">â˜” Precipitation</option>
        <option value="all" selected>ğŸ“Š All</option>
      </select>
    </label>
    <br>
    <button id="showPredictionBtn">Show Prediction</button>
    <button onclick="downloadData('csv')">Download CSV</button>
    <button onclick="downloadData('json')">Download JSON</button>
  </div>

  <canvas id="chart" width="900" height="450"></canvas>

  <!-- ØªÙ‚ÙŠÙŠÙ… Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ -->
  <div class="weather-assessment" id="weatherAssessment" style="display: none;">
    <h2>ğŸŒ¤ï¸ Weather Assessment</h2>
    
    <!-- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø§Ù…Ù„ -->
    <div class="overall-rating">
      <h3>Overall Weather Rating: <span id="overallRating"></span></h3>
      <div class="rating-bar">
        <div class="rating-fill" id="ratingFill"></div>
      </div>
      <p id="weatherRecommendation"></p>
    </div>
    
    <!-- ØªÙØ§ØµÙŠÙ„ ØªØµÙ†ÙŠÙ ÙƒÙ„ Ø¹Ù†ØµØ± -->
    <div class="detailed-assessment">
      <h3>Detailed Assessment</h3>
      <div class="assessment-grid">
        <div class="assessment-item">
          <h4>ğŸŒ¡ï¸ Temperature</h4>
          <p>Value: <span id="tempValue"></span>Â°C</p>
          <p>Classification: <span id="tempClass"></span></p>
          <p>Comfort Level: <span id="tempComfort"></span></p>
        </div>
        
        <div class="assessment-item">
          <h4>ğŸ’§ Humidity</h4>
          <p>Value: <span id="humidityValue"></span>%</p>
          <p>Classification: <span id="humidityClass"></span></p>
          <p>Comfort Level: <span id="humidityComfort"></span></p>
        </div>
        
        <div class="assessment-item">
          <h4>ğŸŒ¬ï¸ Wind Speed</h4>
          <p>Value: <span id="windValue"></span> m/s</p>
          <p>Classification: <span id="windClass"></span></p>
          <p>Comfort Level: <span id="windComfort"></span></p>
        </div>
        
        <div class="assessment-item">
          <h4>â˜” Precipitation</h4>
          <p>Value: <span id="precipValue"></span> mm/day</p>
          <p>Classification: <span id="precipClass"></span></p>
          <p>Comfort Level: <span id="precipComfort"></span></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    let chart = null;
    let lastResult = null;

    const cities = {
      abuja: { name: "Abuja", coords: [9.0765, 7.3986], file: "POWER_Point_Daily_20000101_20251004_008d91N_007d18E_LST.json" },
      ouagadougou: { name: "Ouagadougou", coords: [12.3714, -1.5197], file: "Ouagadougou.json" },
      niamey: { name: "Niamey", coords: [13.5128, 2.1126], file: "Niamey.json" },
      ndjamena: { name: "N'Djamena", coords: [12.1348, 15.0557], file: "N'Djamena.json" },
      nairobi: { name: "Nairobi, Kenya", coords: [-1.2921, 36.8219], file: "Nairobi, KEN.json" },
      monrovia: { name: "Monrovia", coords: [6.3156, -10.8074], file: "Monrovia.json" },
      mcmurdo: { name: "McMurdo Station, Antarctica", coords: [-77.8419, 166.6863], file: "McMurdo Station, ATA.json" },
      malabo: { name: "Malabo", coords: [3.7523, 8.7737], file: "Malabo.json" },
      lome: { name: "LomÃ©", coords: [6.1375, 1.2123], file: "LomÃ©.json" },
      libreville: { name: "Libreville", coords: [0.4162, 9.4673], file: "Libreville.json" },
      kinshasa: { name: "Kinshasa", coords: [-4.4419, 15.2663], file: "Kinshasa.json" },
      kigali: { name: "Kigali", coords: [-1.9706, 30.1044], file: "Kigali.json" },
      kampala: { name: "Kampala", coords: [0.3476, 32.5825], file: "Kampala.json" },
      juba: { name: "Juba, South Sudan", coords: [4.8594, 31.5713], file: "Juba, Central Equatoria, SSD.json" },
      freetown: { name: "Freetown", coords: [8.4657, -13.2317], file: "Freetown.json" },
      dodoma: { name: "Dodoma", coords: [-6.1630, 35.7516], file: "Dodoma.json" },
      dakar: { name: "Dakar", coords: [14.7167, -17.4677], file: "Dakar.json" },
      conakry: { name: "Conakry", coords: [9.6412, -13.5784], file: "Conakry.json" },
      cairo: { name: "Cairo", coords: [30.0444, 31.2357], file: "Cairo POWER_Point_Daily_20000101_20250930_039d93N_116d39E_LST.json" },
      bujumbura: { name: "Bujumbura", coords: [-3.3614, 29.3599], file: "Bujumbura.json" },
      brazzaville: { name: "Brazzaville", coords: [-4.2634, 15.2429], file: "Brazzaville.json" },
      bissau: { name: "Bissau", coords: [11.8636, -15.5977], file: "Bissau.json" },
      banjul: { name: "Banjul", coords: [13.4549, -16.5790], file: "Banjul.json" },
      bangui: { name: "Bangui", coords: [4.3947, 18.5582], file: "Bangui.json" },
      bamako: { name: "Bamako", coords: [12.6392, -8.0029], file: "Bamako.json" },
      asmara: { name: "Asmara", coords: [15.3229, 38.9251], file: "Asmara.json" },
      antananarivo: { name: "Antananarivo", coords: [-18.8792, 47.5079], file: "Antananarivo.json" },
      addisababa: { name: "Addis Ababa", coords: [9.0319, 38.7408], file: "Addis Ababa.json" },
      accra: { name: "Accra", coords: [5.5600, -0.2057], file: "acra.json" },
      yerevan: { name: "Yerevan (Armenia)", coords: [40.1792, 44.4991], file: "ÙŠØ±ÙŠÙØ§Ù†(Ø£Ø±Ù…ÙŠÙ†ÙŠØ§).json" },
      warsaw: { name: "Warsaw (Poland)", coords: [52.2297, 21.0122], file: "ÙˆØ§Ø±Ø³Ùˆ(Ø¨ÙˆÙ„Ø§Ù†Ø¯Ø§).json" },
      helsinki: { name: "Helsinki (Finland)", coords: [60.1699, 24.9384], file: "Ù‡Ù„Ø³Ù†ÙƒÙŠ(ÙÙ†Ù„Ù†Ø¯Ø§).json" },
      nicosia: { name: "Nicosia (Cyprus)", coords: [35.1856, 33.3823], file: "Ù†ÙŠÙ‚ÙˆØ³ÙŠØ§(Ù‚Ø¨Ø±Øµ).json" },
      minsk: { name: "Minsk (Belarus)", coords: [53.9006, 27.5590], file: "Ù…ÙŠÙ†Ø³Ùƒ(Ø¨ÙŠÙ„Ø§Ø±ÙˆØ³ÙŠØ§).json" },
      monaco: { name: "Monaco (Monaco)", coords: [43.7384, 7.4246], file: "Ù…ÙˆÙ†Ø§ÙƒÙˆ(Ù…ÙˆÙ†Ø§ÙƒÙˆ).json" },
      moscow: { name: "Moscow (Russia)", coords: [55.7558, 37.6173], file: "Ù…ÙˆØ³ÙƒÙˆ(Ø±ÙˆØ³ÙŠØ§).json" },
      vatican: { name: "Vatican City (Vatican)", coords: [41.9029, 12.4534], file: "Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†(Ø§Ù„ÙØ§ØªÙŠÙƒØ§Ù†).json" },
      madrid: { name: "Madrid (Spain)", coords: [40.4168, -3.7038], file: "Ù…Ø¯Ø±ÙŠØ¯)Ø§Ø³Ø¨Ø§Ù†ÙŠØ§).json" },
      ljubljana: { name: "Ljubljana (Slovenia)", coords: [46.0569, 14.5058], file: "Ù„ÙŠÙˆØ¨Ù„ÙŠØ§Ù†Ø§(Ø³Ù„ÙˆÙÙŠÙ†ÙŠØ§).json" },
      luxembourg: { name: "Luxembourg (Luxembourg)", coords: [49.6117, 6.1319], file: "Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Øº(Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Øº).json" },
      london: { name: "London (UK)", coords: [51.5074, -0.1278], file: "london.json" },
      lisbon: { name: "Lisbon (Portugal)", coords: [38.7169, -9.1390], file: "Ù„Ø´Ø¨ÙˆÙ†Ø©(Ø§Ù„Ø¨Ø±ØªØºØ§Ù„).json" },
      kyiv: { name: "Kyiv (Ukraine)", coords: [50.4501, 30.5234], file: "ÙƒÙŠÙŠÙ(Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§).json" },
      chisinau: { name: "Chisinau (Moldova)", coords: [47.0105, 28.8638], file: "ÙƒÙŠØ´ÙŠÙ†Ø§Ùˆ(Ù…ÙˆÙ„Ø¯ÙˆÙØ§).json" },
      copenhagen: { name: "Copenhagen (Denmark)", coords: [55.6761, 12.5683], file: "ÙƒÙˆØ¨Ù†Ù‡Ø§ØºÙ†(Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ).json" },
      vienna: { name: "Vienna (Austria)", coords: [48.2100, 16.3738], file: "ÙÙŠÙŠÙ†Ø§(Ø§Ù„Ù†Ù…Ø³Ø§).json" },
      vilnius: { name: "Vilnius (Lithuania)", coords: [54.6872, 25.2797], file: "ÙÙŠÙ„Ù†ÙŠÙˆØ³(Ù„ÙŠØªÙˆØ§Ù†ÙŠØ§).json" },
      valletta: { name: "Valletta (Malta)", coords: [35.8997, 14.5146], file: "ÙØ§Ù„ÙŠØªØ§(Ù…Ø§Ù„Ø·Ø§).json" },
      vaduz: { name: "Vaduz (Liechtenstein)", coords: [47.1416, 9.5215], file: "ÙØ§Ø¯ÙˆØ²(Ù„ÙŠØ®ØªÙ†Ø´ØªØ§ÙŠÙ†).json" },
      sofia: { name: "Sofia (Bulgaria)", coords: [42.6977, 23.3219], file: "ØµÙˆÙÙŠØ§(Ø¨Ù„ØºØ§Ø±ÙŠØ§).json" },
      skopje: { name: "Skopje (North Macedonia)", coords: [41.9981, 21.4254], file: "Ø³ÙƒÙˆØ¨ÙŠÙ‡(Ù…Ù‚Ø¯ÙˆÙ†ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©).json" },
      sarajevo: { name: "Sarajevo (Bosnia & Herzegovina)", coords: [43.8563, 18.4131], file: "Ø³Ø±Ø§ÙŠÙŠÙÙˆ(Ø§Ù„Ø¨ÙˆØ³Ù†Ø© ÙˆØ§Ù„Ù‡Ø±Ø³Ùƒ).json" },
      stockholm: { name: "Stockholm (Sweden)", coords: [59.3293, 18.0686], file: "Ø³ØªÙˆÙƒÙ‡ÙˆÙ„Ù…(Ø§Ù„Ø³ÙˆÙŠØ¯).json" },
      sanmarino: { name: "San Marino (San Marino)", coords: [43.9336, 12.4508], file: "Ø³Ø§Ù† Ù…Ø§Ø±ÙŠÙ†Ùˆ(Ø³Ø§Ù† Ù…Ø§Ø±ÙŠÙ†Ùˆ).json" },
      zagreb: { name: "Zagreb (Croatia)", coords: [45.8150, 15.9785], file: "Ø²ØºØ±Ø¨(ÙƒØ±ÙˆØ§ØªÙŠØ§).json" },
      reykjavik: { name: "Reykjavik", coords: [64.1355, -21.8954], file: "Ø±ÙŠÙƒÙŠØ§ÙÙŠÙƒ(Ø¢ÙŠØ³Ù„Ù†Ø¯Ø§).json" },
      riga: { name: "Riga", coords: [56.9496, 24.1052], file: "Ø±ÙŠØºØ§(Ù„Ø§ØªÙÙŠØ§).json" },
      rome: { name: "Rome", coords: [41.9028, 12.4964], file: "Ø±ÙˆÙ…Ø§(Ø§ÙŠØ·Ø§Ù„ÙŠØ§).json" },
      dublin: { name: "Dublin", coords: [53.3331, -6.2489], file: "Ø¯Ø¨Ù„Ù†(Ø£ÙŠØ±Ù„Ù†Ø¯Ø§).json" },
      tirana: { name: "Tirana", coords: [41.3275, 19.8189], file: "ØªÙŠØ±Ø§Ù†Ø§(Ø£Ù„Ø¨Ø§Ù†ÙŠØ§).json" },
      tbilisi: { name: "Tbilisi", coords: [41.7167, 44.7833], file: "ØªØ¨Ù„ÙŠØ³ÙŠ(Ø¬ÙˆØ±Ø¬ÙŠØ§).json" },
      tallinn: { name: "Tallinn", coords: [59.4370, 24.7536], file: "ØªØ§Ù„ÙŠÙ†(Ø¥Ø³ØªÙˆÙ†ÙŠØ§).json" },
      podgorica: { name: "Podgorica", coords: [42.4410, 19.2627], file: "Ø¨ÙˆØ¯ØºÙˆØ±ÙŠØªØ³Ø§(Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø³ÙˆØ¯).json" },
      budapest: { name: "Budapest", coords: [47.4979, 19.0402], file: "Ø¨ÙˆØ¯Ø§Ø¨Ø³Øª(Ø§Ù„Ù…Ø¬Ø±).json" },
      belgrade: { name: "Belgrade", coords: [44.8176, 20.4569], file: "Ø¨Ù„ØºØ±Ø§Ø¯(ØµØ±Ø¨ÙŠØ§).json" },
      pristina: { name: "Pristina", coords: [42.6675, 21.1669], file: "Ø¨Ø±ÙŠØ´ØªÙŠÙ†Ø§(ÙƒÙˆØ³ÙˆÙÙˆ).json" },
      brussels: { name: "Brussels", coords: [50.8503, 4.3517], file: "Ø¨Ø±ÙˆÙƒØ³Ù„(Ø¨Ù„Ø¬ÙŠÙƒØ§).json" },
      bern: { name: "Bern", coords: [46.9481, 7.4474], file: "Ø¨Ø±Ù†(Ø³ÙˆÙŠØ³Ø±Ø§).json" },
      berlin: { name: "Berlin", coords: [52.5200, 13.4050], file: "Ø¨Ø±Ù„ÙŠÙ†(Ø§Ù„Ù…Ø§Ù†ÙŠØ§).json" },
      prague: { name: "Prague", coords: [50.0755, 14.4378], file: "Ø¨Ø±Ø§Øº(Ø§Ù„ØªØ´ÙŠÙƒ).json" },
      bratislava: { name: "Bratislava", coords: [48.1486, 17.1077], file: "Ø¨Ø±Ø§ØªÙŠØ³Ù„Ø§ÙØ§(Ø³Ù„ÙˆÙØ§ÙƒÙŠØ§).json" },
      baku: { name: "Baku", coords: [40.4093, 49.8671], file: "Ø¨Ø§ÙƒÙˆ(Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†).json" },
      paris: { name: "Paris", coords: [48.8566, 2.3522], file: "Ø¨Ø§Ø±ÙŠØ³(ÙØ±Ù†Ø³Ø§).json" },
      oslo: { name: "Oslo", coords: [59.9139, 10.7522], file: "Ø£ÙˆØ³Ù„Ùˆ(Ø§Ù„Ù†Ø±ÙˆÙŠØ¬).json" },
      ankara: { name: "Ankara", coords: [39.9334, 32.8597], file: "Ø£Ù†Ù‚Ø±Ø©(ØªØ±ÙƒÙŠØ§).json" },
      andorra_la_vella: { name: "Andorra la Vella", coords: [42.5078, 1.5211], file: "Ø£Ù†Ø¯ÙˆØ±Ø§ Ù„Ø§ ÙÙŠÙ„Ø§(Ø£Ù†Ø¯ÙˆØ±Ø§).json" },
      amsterdam: { name: "Amsterdam", coords: [52.3676, 4.9041], file: "Ø£Ù…Ø³ØªØ±Ø¯Ø§Ù…(Ù‡ÙˆØ§Ù†Ø¯Ø§).json" },
      al_rayyan: { name: "Al Rayyan", coords: [25.2919, 51.4244], file: "Ø§Ù„Ø±ÙŠØ§Ù†(Ù‚Ø·Ø±).json" },
      riyadh: { name: "Riyadh", coords: [24.7136, 46.6753], file: "Ø§Ù„Ø±ÙŠØ§Ø¶.json" },
      rabat: { name: "Rabat", coords: [34.0209, -6.8416], file: "Ø§Ù„Ø±Ø¨Ø§Ø·.json" },
      doha: { name: "Doha", coords: [25.276987, 51.520008], file: "Ø§Ù„Ø¯ÙˆØ­Ø©.json" },
      casablanca: { name: "Casablanca", coords: [33.5731, -7.5898], file: "Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡(Ø§Ù„Ù…ØºØ±Ø¨).json" },
      hebron: { name: "Hebron", coords: [31.5326, 35.0998], file: "Ø§Ù„Ø®Ù„ÙŠÙ„(ÙÙ„Ø³Ø·ÙŠÙ†).json" },
      khartoum: { name: "Khartoum", coords: [15.5007, 32.5599], file: "Ø§Ù„Ø®Ø±Ø·ÙˆÙ….json" },
      algiers: { name: "Algiers", coords: [36.7538, 3.0588], file: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±.json" },
      alexandria: { name: "Alexandria", coords: [31.2001, 29.9187], file: "Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©(Ù…ØµØ±).json" },
      ahmadi: { name: "Ahmadi", coords: [29.0765, 48.0833], file: "Ø§Ù„Ø§Ø­Ù…Ø¯ÙŠ(Ø§Ù„ÙƒÙˆÙŠØª).json" },
      irbid: { name: "Irbid", coords: [32.5560, 35.8469], file: "Ø¥Ø±Ø¨Ø¯(Ø§Ù„Ø§Ø±Ø¯Ù†).json" },
      athens: { name: "Athens", coords: [37.9838, 23.7275], file: "Ø£Ø«ÙŠÙ†Ø§(Ø§Ù„ÙŠÙˆÙ†Ø§Ù†).json" },
      abudhabi: { name: "Abu Dhabi", coords: [24.4539, 54.3773], file: "Ø§Ø¨ÙˆØ¸Ø¨Ù‰.json" },
      yaren: { name: "Yaren", coords: [-0.5477, 166.9209], file: "Yaren, NRU.json" },
      yaounde: { name: "YaoundÃ©", coords: [3.8480, 11.5021], file: "YaoundÃ©.json" },
      yamoussoukro: { name: "Yamoussoukro", coords: [6.8276, -5.2893], file: "Yamoussoukro.json" },
      wellington: { name: "Wellington", coords: [-41.2865, 174.7762], file: "Wellington, NZL.json" },
      washington: { name: "Washington", coords: [38.8951, -77.0364], file: "washington (2).json" },
      virginia: { name: "Virginia", coords: [37.4316, -78.6569], file: "VIRGINIA.json" },
      victoria: { name: "Victoria (Seychelles)", coords: [-4.6191, 55.4513], file: "VICTORIA-eychelles.json" },
      vancouver: { name: "Vancouver", coords: [49.2827, -123.1207], file: "Vancouver, BC, CAN.json" },
      valparaiso: { name: "ValparaÃ­so", coords: [-33.0472, -71.6127], file: "ValparaÃ­so, CHL.json" },
      valencia: { name: "Valencia (VEN)", coords: [10.1800, -68.0039], file: "Valencia, Carabobo, VEN.json" },
      trujillo: { name: "Trujillo", coords: [-8.11599, -79.02998], file: "Trujillo, La Libertad, PER.json" },
      toronto: { name: "Toronto", coords: [43.65107, -79.347015], file: "tronto.json" },
      tegucigalpa: { name: "Tegucigalpa", coords: [14.0818, -87.2068], file: "Tegucigalpa, HND.json" },
      tarawa: { name: "Tarawa", coords: [1.4518, 173.0327], file: "Tarawa, Gilbert Islands, KIR.json" },
      sydney: { name: "Sydney", coords: [-33.8688, 151.2093], file: "Sydney, New South Wales, AUS.json" },
      suva: { name: "Suva", coords: [-18.1248, 178.4501], file: "Suva.json" },
      sucre: { name: "Sucre", coords: [-19.0196, -65.2619], file: "Sucre, BOL.json" },
      sao_tome: { name: "SÃ£o TomÃ©", coords: [0.3365, 6.7273], file: "SÃ£o TomÃ©.json" },
      santo_domingo: { name: "Santo Domingo", coords: [18.4861, -69.9312], file: "Santo Domingo, DOM.json" },
      santiago: { name: "Santiago", coords: [-33.4489, -70.6693], file: "Santiago,CHL.json" },
      santa_cruz: { name: "Santa Cruz de la Sierra", coords: [-17.7833, -63.1821], file: "Santa Cruz de la Sierra, BOL.json" },
      san_jose: { name: "San JosÃ©", coords: [9.9281, -84.0907], file: "san-jose costarica.json" },
      san_francisco: { name: "San Francisco", coords: [37.7749, -122.4194], file: "sanfransico.json" },
      san_salvador: { name: "San Salvador", coords: [13.6929, -89.2182], file: "san salavador.json" },
      saint_johns: { name: "Saint John's", coords: [17.1274, -61.8468], file: "Saint John's, Antigua, ATG.json" },
      saint_georges: { name: "Saint George's", coords: [12.0561, -61.7488], file: "Saint George's, Grenada, GRD.json" },
      roseau: { name: "Roseau", coords: [15.3010, -61.3870], file: "Roseau, DMA.json" },
      rio: { name: "Rio de Janeiro", coords: [-22.9068, -43.1729], file: "Rio de Janeiro, BRA.json" },
      quito: { name: "Quito", coords: [-0.1807, -78.4678], file: "Quito, ECU.json" },
      praia: { name: "Praia", coords: [14.9330, -23.5133], file: "Praia.json" },
      porto_novo: { name: "Porto-Novo", coords: [6.4969, 2.6289], file: "Porto-Novo.json" },
      port_au_prince: { name: "Port-au-Prince", coords: [18.5944, -72.3074], file: "Port-au-Prince,HTI.json" },
      port_vila: { name: "Port Vila", coords: [-17.7333, 168.3273], file: "Port Vila,VUT.json" },
      port_of_spain: { name: "Port of Spain", coords: [10.6549, -61.5019], file: "Port of Spain.json" },
      port_moresby: { name: "Port Moresby", coords: [-9.4438, 147.1803], file: "Port Moresby.json" },
      port_louis: { name: "Port Louis", coords: [-20.1609, 57.5012], file: "Port Louis.json" },
      perth: { name: "Perth", coords: [-31.9505, 115.8605], file: "Perth, Western Australia, AUS.json" },
      paramaribo: { name: "Paramaribo", coords: [5.8520, -55.2038], file: "Paramaribo, SUR.json" },
      panama_city: { name: "PanamÃ¡ City", coords: [8.9824, -79.5199], file: "PanamÃ¡, PAN.json" },
      ottawa: { name: "Ottawa", coords: [45.4215, -75.6972], file: "Ottawa.json" },
      nukualofa: { name: "Nuku'alofa", coords: [-21.1394, -175.2049], file: "Nuku'alofa, Kolofo'ou, Tongatapu, TON.json" },
      ngerulmud: { name: "Ngerulmud", coords: [7.5004, 134.6243], file: "Ngerulmud, PLW.json" },
      new_york: { name: "New York", coords: [40.7128, -74.0060], file: "NewYork.json" },
      new_mexico: { name: "New Mexico", coords: [34.5199, -105.8701], file: "newmexico.json" },
      newjersey: { name: "New Jersey", coords: [40.0583, -74.4057], file: "NEWJERSEY.json" },
      new_mexico2: { name: "New Mexico (2)", coords: [34.5199, -105.8701], file: "NEW MEXICO.json" },
      nassau: { name: "Nassau", coords: [25.0343, -77.3963], file: "Nassau, BHS.json" },
      montreal: { name: "MontrÃ©al", coords: [45.5019, -73.5674], file: "MontrÃ©al, QC, CAN.json" },
      monterrey: { name: "Monterrey", coords: [25.6866, -100.3161], file: "Monterrey.json" },
      miami: { name: "Miami", coords: [25.7617, -80.1918], file: "Miami, FL, USA.json" },
      melbourne: { name: "Melbourne", coords: [-37.8136, 144.9631], file: "Melbourne, Victoria, AUS.json" },
      michigan: { name: "Michigan", coords: [44.3148, -85.6024], file: "MECHIGAN.json" },
      mar_del_plata: { name: "Mar del Plata", coords: [-38.0055, -57.5426], file: "Mar del Plata, General PueyrredÃ³n, Provincia de Buenos Aires, ARG.json" },
      manaus: { name: "Manaus", coords: [-3.1190, -60.0217], file: "Manaus, Amazonas, BRA.json" },
      managua: { name: "Managua", coords: [12.1140, -86.2362], file: "Managua, NIC.json" },
      majuro: { name: "Majuro", coords: [7.0897, 171.3803], file: "Majuro, MHL.json" },
      los_angeles: { name: "Los Angeles", coords: [34.0522, -118.2437], file: "Los Angeles, USA.json" },
      london: { name: "London", coords: [51.5074, -0.1278], file: "london.json" },
      lima: { name: "Lima", coords: [-12.0464, -77.0428], file: "Lima, PER.json" },
      havana: { name: "Havana", coords: [23.1136, -82.3666], file: "La Habana, CUB.json" },
      kingstown: { name: "Kingstown", coords: [13.1600, -61.2248], file: "KINGSTOWN.json" },
      kingston: { name: "Kingston", coords: [17.9712, -76.7936], file: "Kingston, JAM.json" },
      honiara: { name: "Honiara", coords: [-9.4456, 159.9729], file: "Honiara, SLB.json" },
      guatemala_city: { name: "Guatemala City", coords: [14.6349, -90.5069], file: "guatemala.json" },
      greenland: { name: "Greenland", coords: [71.7069, -42.6043], file: "GREENLAND.json" },
      georgetown: { name: "Georgetown", coords: [6.8013, -58.1551], file: "Georgetown,GUY.json" },
      funafuti: { name: "Funafuti", coords: [-8.5201, 179.1970], file: "Funafuti, TUV.json" },
      cuenca: { name: "Cuenca", coords: [-2.9001, -79.0059], file: "Cuenca, ECU.json" },
      ciudad_del_este: { name: "Ciudad del Este", coords: [-25.5167, -54.6167], file: "Ciudad del Este-par.json" },
      castries: { name: "Castries", coords: [13.9094, -60.9789], file: "Castries, LCA.json" },
      caracas: { name: "Caracas", coords: [10.4806, -66.9036], file: "Caracas, Municipio Libertador, Distrito Capital, VEN.json" },
      canberra: { name: "Canberra", coords: [-35.2809, 149.1300], file: "Canberra.json" },
      california: { name: "California", coords: [36.7783, -119.4179], file: "california-America.json" },
      cali: { name: "Cali", coords: [3.4516, -76.5320], file: "Cali, Valle del Cauca, COL.json" },
      buenos_aires1: { name: "Buenos Aires", coords: [-34.6037, -58.3816], file: "Buenos Aires,ARG.json" },
      buenos_aires2: { name: "Buenos Aires", coords: [-34.6037, -58.3816], file: "Buenos Aires, ARG.json" },
      bridgetown: { name: "Bridgetown", coords: [13.1939, -59.5432], file: "Bridgetown, Saint Michel, BRB.json" },
      brasilia: { name: "BrasÃ­lia", coords: [-15.8267, -47.9218], file: "BrasÃ­lia, BRA.json" },
      bogota: { name: "BogotÃ¡", coords: [4.7110, -74.0721], file: "BogotÃ¡,COL.json" },
      belmopan: { name: "Belmopan", coords: [17.2510, -88.7590], file: "belmopan-BLZ.json" },
      basseterre: { name: "Basseterre", coords: [17.3026, -62.7177], file: "Basseterre.json" },
      asuncion: { name: "AsunciÃ³n", coords: [-25.2637, -57.5759], file: "AsunciÃ³n,PY.json" },
      arizona: { name: "Arizona", coords: [34.0489, -111.0937], file: "Arizona.json" },
      apia: { name: "Apia", coords: [-13.8333, -171.7667], file: "Apia, WSM.json" },
 kathmandu: { name: "Kathmandu", coords: [27.712, 85.313], file: "Kathmandu NEPAL.json" }, 
himachal: { name: "Himachal", coords: [31.031, 76.784], file: "Himachal INDIA.json" }, 
brunei: { name: "Brunei", coords: [4.584, 114.215], file: "Brunei.json" }, 
kuala_lumpur: { name: "Kuala Lumpur", coords: [3.140853, 101.693207], file: "Kuala Lumpur, Wilayah Persekutuan Kuala Lumpur, MYS.json" }, 
tokyo_gaien_campus: { name: "Kyoto Geijutsu Univ. Tohoku Univ. of Art & Design Gaien Campus, Minato, Tokyo, JPN", coords: [35.6663, 139.7173], file: "Kyoto Geijutsu Univ. Tohoku Univ. of Art & Design Gaien Campus, Minato, Tokyo, JPN.json" }, 
lahore: { name: "Lahore, Pakistan", coords: [31.5204, 74.3587], file: "Lahore pakistan.json" }, 
luang_prabang: { name: "Luang Prabang", coords: [19.8933, 102.1350], file: "Luang Prabang.json" }, 
male: { name: "MalÃ©, MV", coords: [4.1755, 73.5093], file: "MalÃ© MV.json" }, 
manila: { name: "Manila, Metro Manila, National Capital Region, PHL", coords: [14.5995, 120.9842], file: "Manila, Metro Manila, National Capital Region, PHL.json" }, 
mumbai: { name: "Mumbai, India", coords: [19.0760, 72.8777], file: "Mumbai india.json" }, 
naypyidaw: { name: "Naypyidaw, Nay Pyi Taw Union Territory, MMR", coords: [19.7633, 96.0785], file: "Naypyidaw, Nay Pyi Taw Union Territory, MMR.json" }, 
osaka_ohsho: { name: "Osaka Ohsho, Shinjuku, Tokyo, JPN", coords: [35.6938, 139.7034], file: "Osaka Ohsho, Shinjuku, Tokyo, JPN.json" }, 
phnom_penh: { name: "Phnom Penh, KHM", coords: [11.5564, 104.9282], file: "Phnom Penh, KHM.json" }, 
pokhara: { name: "Pokhara, Nepal", coords: [28.2096, 83.9856], file: "Pokhara NEPAL.json" }, 
pyongyang: { name: "Pyongyang, P'Yongyang-Si, PRK", coords: [39.0392, 125.7625], file: "Pyongyang, P'Yongyang-Si, PRK.json" }, 
quezon_city: { name: "Quezon City, Metro Manila, National Capital Region, PHL", coords: [14.6760, 121.0437], file: "Quezon City Metro Manila, National Capita.json" }, 
samarkand: { name: "Samarkand, UZB", coords: [39.6542, 66.9597], file: "Samarkand, UZB.json" }, 
savannakhet: { name: "Savannakhet, Kaysone Phomvihane, LAO", coords: [16.5703, 104.7607], file: "Savannakhet, Kaysone Pho.json" }, 
seoul: { name: "Seoul, KOR", coords: [37.5665, 126.9780], file: "Seoul, KOR.json" }, 
seria_rotonda_monument: { name: "Seria Rotonda Monument, Jalan Pandan Lima, Kampung Mumong A, Belait, BRN", coords: [4.6097, 114.3247], file: "Seria Rotonda Monument, Jalan Pandan Lima, Kampung Mumong A, Belait, BRN.json" }, 
shymkent: { name: "Shymkent, KAZ", coords: [42.3417, 69.5901], file: "Shymkent, KAZ.json" }, 
siem_reap: { name: "Siem Reap, KHM", coords: [13.3671, 103.8448], file: "Siem Reap, KHM.json" }, 
singapore: { name: "Singapore, SGP", coords: [1.3521, 103.8198], file: "Singapore, SGP.json" }, 
sri_jayawardenepura_kotte: { name: "Sri Jayawardenepura Kotte, Sri Lanka", coords: [6.9271, 79.8612], file: "Sri Jayawardenepura Kotte SRI LANKA.json" }, 
surabaya: { name: "Surabaya, Jawa Timur, IDN", coords: [-7.2575, 112.7521], file: "Surabaya, Jawa Timur, IDN.json" }, 
taipei: { name: "Taipei City, TWN", coords: [25.0330, 121.5654], file: "Taipei City, TWN.json" }, 
tashkent: { name: "Tashkent, UZB", coords: [41.2995, 69.2401], file: "Tashkent, UZB.json" }, 
tokyo: { name: "Tokyo, JPN", coords: [35.6895, 139.6917], file: "Tokyo, JPN.json" }, 
turkmenabat: { name: "TÃ¼rkmenabat, Lebap, TKM", coords: [39.0747, 63.5785], file: "TÃ¼rkmenabat, Lebap, TKM.json" }, 
ulaanbaatar: { name: "Ulaanbaatar, Sukhbaatar, Ulaanbaatar, MNG", coords: [47.9183, 106.9170], file: "Ulaanbaatar, Sukhbaatar, Ulaanbaatar, MNG.json" }, 
vientiane: { name: "Vientiane, Chanthabuly, Vientiane Capital, LAO", coords: [17.9757, 102.6331], file: "Vientiane, Chanthabuly, Vientiane Capital, LAO.json" }, 
yangon: { name: "Yangon, MMR", coords: [16.8409, 96.1735], file: "Yangon MMR.json" },
addu_city: { name: "Addu City, Addu Atoll, MDV", coords: [-0.6308, 73.1580], file: "Addu City, Addu Atoll, MDV.json" }, 
almaty: { name: "Almaty, KAZ", coords: [43.2220, 76.8512], file: "Almaty, KAZ.json" }, 
ashgabat: { name: "Ashgabat, TKM", coords: [37.9601, 58.3261], file: "Ashgabat, TKM.json" }, 
astana: { name: "Astana, KAZ", coords: [51.1605, 71.4704], file: "Astana, KAZ.json" }, 
bandar_seri_begawan: { name: "Bandar Seri Begawan, BRN", coords: [4.9031, 114.9398], file: "Bandar Seri Begawan, BRN.json" }, 
bandung: { name: "Bandung, Jawa Barat, IDN", coords: [-6.9175, 107.6191], file: "Bandung, Jawa Barat, IDN.json" }, 
bishkek: { name: "Bishkek, KGZ", coords: [42.8746, 74.5698], file: "Bishkek, KGZ.json" }, 
biratnagar: { name: "Biratnagar, NEPAL", coords: [26.4550, 87.2718], file: "Biratnagar NEPAL.json" }, 
beijing: { name: "Beijing, CHN", coords: [39.9042, 116.4074], file: "Beijing, CHN.json" }, 
baucau: { name: "Baucau, TLS", coords: [-8.4716, 126.4570], file: "Baucau, TLS.json" }, 
bangkok: { name: "Bangkok, Phra Nakhon, Bangkok, THA", coords: [13.7563, 100.5018], file: "Bangkok, Phra Nakhon, Bangkok, THA.json" }, 
bangalore: { name: "Bangalore, India", coords: [12.9716, 77.5946], file: "Bangalore india.json" }, 
busan: { name: "Busan, KOR", coords: [35.1796, 129.0756], file: "Busan KOR.json" }, 
cebu_city: { name: "Cebu City, Cebu, Central Visayas, PHL", coords: [10.3157, 123.8854], file: "Cebu City, Cebu, Central Visayas, PHL.json" }, 
chiang_mai: { name: "Chiang Mai Khaep Mu Prachathipok Rd., Somdet Chaophraya, Khlong San, Bangkok 10600, THA", coords: [18.7883, 98.9853], file: "Chiang Mai Khaep Mu Prachathipok Rd., Somdet Chaophraya, Khlong San, Bangkok 10600, THA.json" }, 
chittagong: { name: "Chittagong, BGD", coords: [22.3569, 91.7832], file: "Chittagong BGD.json" }, 
colombo: { name: "Colombo, SRI LANKA", coords: [6.9271, 79.8612], file: "Colombo SRI LANKA.json" }, 
da_nang: { name: "Da Nang, VNM", coords: [16.0471, 108.2068], file: "Da Nang, VNM.json" }, 
dhaka: { name: "Dhaka, Bangladesh", coords: [23.8103, 90.4125], file: "Dhaka bangladish.json" }, 
dili: { name: "Dili, Vera Cruz, DÃ­li, TLS", coords: [-8.5569, 125.5603], file: "Dili, Vera Cruz, DÃ­li, TLS.json" }, 
dushanbe_india: { name: "Dushanbe, India", coords: [28.6139, 77.2090], file: "Dushanbe India.json" }, 
dushanbe: { name: "Dushanbe, TJK", coords: [38.5598, 68.7870], file: "Dushanbe, TJK.json" }, 
erdenet: { name: "Erdenet, Orhon, MNG", coords: [49.0331, 104.0444], file: "Erdenet, Orhon, MNG.json" }, 
guangzhou: { name: "Guangzhou, Guangdong, CHN", coords: [23.1291, 113.2644], file: "Guangzhou, Guangdong, CHN.json" }, 
hamhung: { name: "Hamhung, Hamgyong-Namdo, PRK", coords: [39.9183, 127.5364], file: "Hamhung, Hamgyong-Namdo, PRK.json" }, 
hanoi: { name: "Hanoi, VNM", coords: [21.0278, 105.8342], file: "Hanoi, VNM.json" }, 
hiroshima: { name: "Hiroshima, JPN", coords: [34.3853, 132.4553], file: "Hiroshima, JPN.json" }, 
hong_kong: { name: "Hong Kong, CHN", coords: [22.3193, 114.1694], file: "Hong Kong CHN.json" }, 
islamabad: { name: "Islamabad, Pakistan", coords: [33.6844, 73.0479], file: "islamabad pakstan.json" }, 
jakarta: { name: "Jakarta Special Capital Region, Jakarta, IDN", coords: [-6.2088, 106.8456], file: "Jakarta Special Capital Region, Jakarta, IDN.json" }, 
jalalabad: { name: "Jalalabad, Shahjahanpur, Uttar Pradesh, IND", coords: [27.6167, 79.6667], file: "Jalalabad, Shahjahanpur, Uttar Pradesh, IND.json" }, 
kandy: { name: "Kandy, SRI LANKA", coords: [7.2906, 80.6337], file: "Kandy SRI LANKA.json" }, 
kaohsiung: { name: "Kaohsiung City, TWN", coords: [22.6273, 120.3014], file: "Kaohsiung City, TWN.json" }, 
karachi: { name: "Karachi, Pakistan", coords: [24.8607, 67.0011], file: "Karachi pakstan.json" }, 
kolkata: { name: "Kolkata, India", coords: [22.5726, 88.3639], file: "Kolkata india.json" }, 
kuala_belait: { name: "Kuala Belait, Belait, BRN", coords: [4.5836, 114.2312], file: "Kuala Belait, Belait, BRN.json" }

}



    // âœ… Ø¨Ù†Ø§Ø¡ Dropdown Ù…Ù† Ø§Ù„Ù…Ø¯Ù†
    const citySelect = document.getElementById("citySelect");
    for (const key in cities) {
      const option = document.createElement("option");
      option.value = key;
      option.textContent = cities[key].name;
      citySelect.appendChild(option);
    }

    // âœ… Ø®Ø±ÙŠØ·Ø©
    const map = L.map("map").setView([10, 20], 3);

    const osmLayer = L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
      attribution: '&copy; OpenStreetMap &copy; CARTO',
      subdomains: 'abcd',
      maxZoom: 19,
      noWrap: true // Ù‡Ø°Ù‡ ØªÙ…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø£ÙÙ‚ÙŠ
    }).addTo(map);

    for (const key in cities) {
      const city = cities[key];
      const marker = L.marker(city.coords).addTo(map);
    }

    const showPredictionBtn = document.getElementById("showPredictionBtn");

    showPredictionBtn.addEventListener("click", () => {
      const key = citySelect.value;
      if (!key) { alert("Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†Ø© Ø£ÙˆÙ„Ø§!"); return; }
      const city = cities[key];
      map.setView(city.coords, 10);
      // Zoom
      showData(city);
    });

    for (const key in cities) {
      const city = cities[key];
      const marker = L.marker(city.coords).addTo(map);
      marker.on("click", () => {
        citySelect.value = key;
        map.setView(city.coords, 10);
        showData(city);
      });
    }

    citySelect.addEventListener("change", () => {
      const key = citySelect.value;
      if (key && cities[key]) {
        map.setView(cities[key].coords, 10);
      }
    });

    // Ø¯Ø§Ù„Ø© Ù„ØªØµÙ†ÙŠÙ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©
    function classifyTemperature(temp) {
      if (temp < 10) return { class: "Very Cold", comfort: "very bad" };
      if (temp >= 10 && temp <= 25) return { class: "Comfortable", comfort: "very good" };
      if (temp >= 26 && temp <= 35) return { class: "Hot", comfort: "bad" };
      if (temp > 35) return { class: "Very Hot", comfort: "very bad" };
      return { class: "Unknown", comfort: "normal" };
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø·ÙˆØ¨Ø©
    function classifyHumidity(humidity) {
      if (humidity < 30) return { class: "Dry", comfort: "bad" };
      if (humidity >= 30 && humidity <= 60) return { class: "Comfortable", comfort: "very good" };
      if (humidity > 60) return { class: "Humid", comfort: "bad" };
      return { class: "Unknown", comfort: "normal" };
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªØµÙ†ÙŠÙ Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­
    function classifyWindSpeed(windSpeed) {
      if (windSpeed < 10) return { class: "Calm", comfort: "very good" };
      if (windSpeed >= 10 && windSpeed <= 30) return { class: "Moderate", comfort: "good" };
      if (windSpeed > 30) return { class: "Strong", comfort: "bad" };
      return { class: "Unknown", comfort: "normal" };
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªØµÙ†ÙŠÙ Ù‡Ø·ÙˆÙ„ Ø§Ù„Ø£Ù…Ø·Ø§Ø±
    function classifyPrecipitation(precip) {
      if (precip < 1) return { class: "No/Light Rain", comfort: "very good" };
      if (precip >= 1 && precip <= 5) return { class: "Moderate Rain", comfort: "normal" };
      if (precip > 5) return { class: "Heavy Rain", comfort: "bad" };
      return { class: "Unknown", comfort: "normal" };
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø§Ù…Ù„
    function calculateOverallRating(tempComfort, humidityComfort, windComfort, precipComfort) {
      const comfortScores = {
        "very bad": 1,
        "bad": 2,
        "normal": 3,
        "good": 4,
        "very good": 5
      };
      
      const totalScore = comfortScores[tempComfort] + comfortScores[humidityComfort] + 
                        comfortScores[windComfort] + comfortScores[precipComfort];
      
      const averageScore = totalScore / 4;
      
      if (averageScore >= 4.5) return { rating: "Very Good", score: averageScore, class: "rating-very-good" };
      if (averageScore >= 3.5) return { rating: "Good", score: averageScore, class: "rating-good" };
      if (averageScore >= 2.5) return { rating: "Normal", score: averageScore, class: "rating-normal" };
      if (averageScore >= 1.5) return { rating: "Bad", score: averageScore, class: "rating-bad" };
      return { rating: "Very Bad", score: averageScore, class: "rating-very-bad" };
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ù‚Ø³
    function displayWeatherAssessment(result) {
      const temp = parseFloat(result.temperature);
      const humidity = parseFloat(result.humidity);
      const windSpeed = parseFloat(result.windSpeed);
      const precipitation = parseFloat(result.precipitation);
      
      // ØªØµÙ†ÙŠÙ ÙƒÙ„ Ø¹Ù†ØµØ±
      const tempAssessment = classifyTemperature(temp);
      const humidityAssessment = classifyHumidity(humidity);
      const windAssessment = classifyWindSpeed(windSpeed);
      const precipAssessment = classifyPrecipitation(precipitation);
      
      // Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø§Ù…Ù„
      const overallRating = calculateOverallRating(
        tempAssessment.comfort, 
        humidityAssessment.comfort, 
        windAssessment.comfort, 
        precipAssessment.comfort
      );
      
      // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      document.getElementById("overallRating").textContent = overallRating.rating;
      document.getElementById("ratingFill").className = "rating-fill " + overallRating.class;
      document.getElementById("ratingFill").style.width = (overallRating.score / 5 * 100) + "%";
      
      // Ù†Øµ Ø§Ù„ØªÙˆØµÙŠØ©
      let recommendation = "";
      if (overallRating.rating === "Very Good") {
        recommendation = "Perfect weather conditions! Great for outdoor activities.";
      } else if (overallRating.rating === "Good") {
        recommendation = "Good weather conditions. Suitable for most outdoor activities.";
      } else if (overallRating.rating === "Normal") {
        recommendation = "Moderate weather conditions. Some activities may be affected.";
      } else if (overallRating.rating === "Bad") {
        recommendation = "Poor weather conditions. Consider indoor activities.";
      } else {
        recommendation = "Very poor weather conditions. Avoid outdoor activities if possible.";
      }
      document.getElementById("weatherRecommendation").textContent = recommendation;
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙØ§ØµÙŠÙ„
      document.getElementById("tempValue").textContent = temp.toFixed(1);
      document.getElementById("tempClass").textContent = tempAssessment.class;
      document.getElementById("tempComfort").textContent = tempAssessment.comfort;
      
      document.getElementById("humidityValue").textContent = humidity.toFixed(1);
      document.getElementById("humidityClass").textContent = humidityAssessment.class;
      document.getElementById("humidityComfort").textContent = humidityAssessment.comfort;
      
      document.getElementById("windValue").textContent = windSpeed.toFixed(1);
      document.getElementById("windClass").textContent = windAssessment.class;
      document.getElementById("windComfort").textContent = windAssessment.comfort;
      
      document.getElementById("precipValue").textContent = precipitation.toFixed(1);
      document.getElementById("precipClass").textContent = precipAssessment.class;
      document.getElementById("precipComfort").textContent = precipAssessment.comfort;
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
      document.getElementById("weatherAssessment").style.display = "block";
    }

    async function showData(city) {
      const day = parseInt(document.getElementById("day").value);
      const month = parseInt(document.getElementById("month").value);
      const year = parseInt(document.getElementById("year").value);
      const predictionType = document.getElementById("predictionType").value;

      if (isNaN(day) || isNaN(month) || isNaN(year)) {
        alert("Please enter valid day, month, and year!");
        return;
      }

      try {
        const response = await fetch(city.file);
        const json = await response.json();
        const data = json.properties.parameter;

        const formatDate = (y, m, d) => `${y}${m.toString().padStart(2,"0")}${d.toString().padStart(2,"0")}`;

        function getPastValues(dataset) {
          const values = [];
          for (let y = 2000; y <= 2025; y++) {
            const key = formatDate(y, month, day);
            if (dataset[key] !== undefined && dataset[key] !== -999) {
              values.push(dataset[key]);
            }
          }
          return values;
        }

        const pastTemp = getPastValues(data.T2M);
        const pastHumidity = getPastValues(data.QV2M);
        const pastWindSpeed = getPastValues(data.WS10M);
        const pastWindDir = getPastValues(data.WD10M);
        const pastPrecip = getPastValues(data.PRECTOTCORR);

        if (pastTemp.length === 0) {
          alert("No past data available for this date.");
          return;
        }

        const avg = arr => arr.reduce((a,b)=>a+b,0)/arr.length;

        const result = {
          city: city.name,
          date: `${day}/${month}/${year}`,
          temperature: avg(pastTemp).toFixed(2),
          humidity: avg(pastHumidity).toFixed(2),
          windSpeed: avg(pastWindSpeed).toFixed(2),
          windDirection: avg(pastWindDir).toFixed(0),
          precipitation: avg(pastPrecip).toFixed(2)
        };

        lastResult = result;

        const ctx = document.getElementById("chart").getContext("2d");
        if (chart) chart.destroy();

        let datasets = [];
        if (predictionType === "all") {
          datasets = [
            { label: "Temperature (Â°C)", data: [parseFloat(result.temperature)], backgroundColor: "rgba(255,99,132,0.7)" },
            { label: "Humidity (g/kg)", data: [parseFloat(result.humidity)], backgroundColor: "rgba(75,192,192,0.7)" },
            { label: "Wind Speed (m/s)", data: [parseFloat(result.windSpeed)], backgroundColor: "rgba(54,162,235,0.7)" },
            { label: "Wind Direction (Â°)", data: [parseFloat(result.windDirection)], backgroundColor: "rgba(255,206,86,0.7)" },
            { label: "Precipitation (mm/dd)", data: [parseFloat(result.precipitation)], backgroundColor: "rgba(153,102,255,0.7)" }
          ];
        } else {
          datasets = [
            { label: predictionType, data: [parseFloat(result[predictionType])], backgroundColor: "rgba(54,162,235,0.7)" }
          ];
        }

        chart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: [`Prediction for ${result.date} in ${result.city}`],
            datasets: datasets
          },
          options: {
            responsive: true,
            plugins: {
              legend: { position: "top" },
              title: { display: true, text: "Weather Prediction" }
            },
            scales: { y: { beginAtZero: true } }
          }
        });

        // Ø¹Ø±Ø¶ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ù‚Ø³
        displayWeatherAssessment(result);
      } catch (err) {
        console.error(err);
        alert("Failed to load JSON data.");
      }
    }

    function downloadData(type) {
      if (!lastResult) {
        alert("No data to download! Please click on a city first.");
        return;
      }
      if (type === "json") {
        const blob = new Blob([JSON.stringify(lastResult, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "weather_prediction.json";
        a.click();
        URL.revokeObjectURL(url);
      } else if (type === "csv") {
        const headers = Object.keys(lastResult).join(",") + "\n";
        const values = Object.values(lastResult).join(",") + "\n";
        const blob = new Blob([headers + values], { type: "text/csv" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "weather_prediction.csv";
        a.click();
        URL.revokeObjectURL(url);
      }
    }
  </script>
</body>
</html>